"use strict";(self.webpackChunkproductionproject=self.webpackChunkproductionproject||[]).push([[798],{7798:function(e,t,a){a.r(t),a.d(t,{default:function(){return w}});var s,n=a(7294),r=a(2327),l=a(3007),c=a(6425),i=a(2047),o=a(1715);function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},u.apply(this,arguments)}var d=e=>n.createElement("svg",u({width:24,height:22,fill:"none",xmlns:"http://www.w3.org/2000/svg",role:"img"},e),s||(s=n.createElement("path",{d:"M11.075 1.633c.32-.844 1.53-.844 1.852 0l2.07 5.734a.99.99 0 0 0 .926.633h5.087c.94 0 1.35 1.17.61 1.743L18 13a.968.968 0 0 0-.321 1.092L19 19.695c.322.9-.72 1.673-1.508 1.119l-4.917-3.12a1 1 0 0 0-1.15 0l-4.917 3.12c-.787.554-1.83-.22-1.508-1.119l1.322-5.603A.968.968 0 0 0 6 13L2.38 9.743C1.64 9.17 2.053 8 2.99 8h5.087a.989.989 0 0 0 .926-.633l2.07-5.734h0Z",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"}))),h=a(3895),m=a(5893);const p=[1,2,3,4,5];var x=(0,n.memo)((e=>{const{className:t,size:a=30,selectedStars:s=0,onSelect:r}=e,[c,i]=(0,n.useState)(s),[o,u]=(0,n.useState)(Boolean(s)),x=()=>{o||i(0)},g=e=>()=>{o||(r?.(e),i(e),u(!0))};return(0,m.jsx)("div",{className:(0,l.A)("",{},[t]),children:p.map((e=>{return(0,m.jsx)(h.J,{className:(0,l.A)("Z1C6Y",{Qpbxq:c>=e,Yv7EH:o,ouStZ:o},[]),Svg:d,width:a,height:a,onMouseLeave:x,onMouseEnter:(t=e,()=>{o||i(t)}),onClick:g(e)},e);var t}))})})),g=a(7157),j=a(8312),v=a(5255),f=a(7509),k=a(3747);const b=(0,n.memo)((e=>{const{className:t,feedbackTitle:a,hasFeedback:s,onAccept:u,onCancel:d,title:h,rate:p=0}=e,{t:b,i18n:y}=(0,r.$)(),[C,S]=(0,n.useState)(!1),[N,A]=(0,n.useState)(p),[I,w]=(0,n.useState)(""),L=(0,n.useCallback)((e=>{A(e),s?S(!0):u?.(e),S(!0)}),[u,s]),O=(0,n.useCallback)((()=>{S(!1),u?.(N,I)}),[I,N,u]),E=(0,n.useCallback)((()=>{S(!1),d?.(N)}),[d,N]),z=(0,m.jsxs)(i.g,{max:!0,gap:"32",children:[(0,m.jsx)(o.xv,{title:a}),(0,m.jsx)(j.I,{value:I,onChange:w,placeholder:b("Your comment")}),(0,m.jsxs)(i.U,{max:!0,gap:"16",justify:"end",children:[(0,m.jsx)(v.zx,{onClick:E,theme:v.bn.OUTLINE_RED,children:b("Close")}),(0,m.jsx)(v.zx,{onClick:O,children:b("Send")})]})]}),{width:M}=(0,k.X)(),R=M<=768;return(0,m.jsxs)(c.ZP,{className:(0,l.A)("",{},[t]),max:!0,children:[(0,m.jsxs)(i.g,{align:"center",gap:"8",max:!0,children:[(0,m.jsx)(o.xv,{title:N?b("Thank you"):h}),(0,m.jsx)(x,{selectedStars:N,size:40,onSelect:L})]}),R?(0,m.jsx)(f.d,{isOpen:C,lazy:!0,children:z}):(0,m.jsx)(g.u,{isOpen:C,lazy:!0,children:z})]})})),y=a(6628).p.injectEndpoints({endpoints:e=>({getArticleRating:e.query({query:e=>{let{userId:t,articleId:a}=e;return{url:"/article-ratings",params:{userId:t,articleId:a}}}}),rateArticle:e.mutation({query:e=>({url:"/article-ratings",method:"POST",body:e})})})}),C=y.useGetArticleRatingQuery,S=y.useRateArticleMutation;var N=a(9319),A=a(3381),I=a(3312),w=(0,n.memo)((e=>{const{className:t,articleId:a}=e,{t:s,i18n:l}=(0,r.$)(),c=(0,N.v9)(A.m5),{data:i,isLoading:o}=C({articleId:a,userId:c?.id??""}),[u]=S(),d=(0,n.useCallback)(((e,t)=>{try{u({userId:c?.id??"",articleId:a,rate:e,feedback:t})}catch{console.log("Mistake is happened")}}),[c?.id,a,u]),h=(0,n.useCallback)(((e,t)=>{d(e,t)}),[d]),p=(0,n.useCallback)((e=>{d(e)}),[d]);if(o)return(0,m.jsx)(I.O,{width:"100%",height:120});const x=i?.[0];return(0,m.jsx)(b,{onAccept:h,onCancel:p,rate:x?.rate,className:t,title:s("Rate the article"),feedbackTitle:s("Leave your feedback about the article"),hasFeedback:!0})}))},8312:function(e,t,a){a.d(t,{I:function(){return l}});var s=a(3007),n=a(7294),r=a(5893);const l=(0,n.memo)((e=>{const{className:t,value:a,onChange:l,type:c="text",placeholder:i,autofocus:o,readonly:u,...d}=e,[h,m]=(0,n.useState)(!1),[p,x]=(0,n.useState)(0),g=(0,n.useRef)(null),j=h&&!u;return(0,n.useEffect)((()=>{o&&(m(!0),g.current?.focus())}),[o]),(0,r.jsxs)("div",{className:(0,s.A)("yiPAS",{},[t]),children:[i&&(0,r.jsx)("div",{className:"emAQQ",children:`${i}>`}),(0,r.jsxs)("div",{className:"y1GiF",children:[(0,r.jsx)("input",{ref:g,type:c,value:a,onChange:e=>{l?.(e.target.value),x(e.target.value.length)},className:"LVdIP",onFocus:()=>{m(!0)},onBlur:()=>{m(!1)},onSelect:e=>{x(e?.target?.selectionStart||0)},readOnly:u,...d}),j&&(0,r.jsx)("span",{className:"lqMFG",style:{left:9*p+"px"}})]})]})}))}}]);