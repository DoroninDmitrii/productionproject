"use strict";(self.webpackChunkproductionproject=self.webpackChunkproductionproject||[]).push([[819],{3819:(e,t,n)=>{n.r(t),n.d(t,{ArticleDetailsPage:()=>Q,default:()=>Y});var r=n(5893),i=n(4611),a=n(2327),o=n(7294),c=n(9994),s=n(4809),l=n(9250),u=n(71),d=n(1138),f=n(3048),v=n(8056);const h="xIHBy",p="dsH_3",m="Ks7Ky",y="dw82W";var b=function(){return b=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},b.apply(this,arguments)};const x=(0,o.memo)((function(e){var t=e.className,n=e.comment;return e.isLoading?(0,r.jsxs)("div",b({className:(0,i.A)(h,{},[t,"V0iZ1"])},{children:[(0,r.jsxs)("div",b({className:p},{children:[(0,r.jsx)(d.O,{width:30,height:30,border:"50%"},void 0),(0,r.jsx)(d.O,{height:16,width:100,className:y},void 0)]}),void 0),(0,r.jsx)(d.O,{className:m,width:"100%",height:50},void 0)]}),void 0):n?(0,r.jsxs)("div",b({className:(0,i.A)(h,{},[t])},{children:[(0,r.jsxs)(f.F,b({to:"".concat(v.h3.profile,"/").concat(n.user.id),className:p},{children:[n.user.avatar?(0,r.jsx)(u.q,{size:30,src:n.user.avatar},void 0):null,(0,r.jsx)(s.xv,{className:y,title:n.user.username},void 0)]}),void 0),(0,r.jsx)(s.xv,{className:m,text:n.text},void 0)]}),void 0):null})),g={comment:"zo5NF"};var w=function(){return w=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},w.apply(this,arguments)},j=(0,o.memo)((function(e){var t=e.className,n=e.comments,o=e.isLoading,c=(0,a.$)(),l=c.t;return c.i18n,o?(0,r.jsxs)("div",w({className:(0,i.A)(g.CommentList,{},[t])},{children:[(0,r.jsx)(x,{isLoading:!0},void 0),(0,r.jsx)(x,{isLoading:!0},void 0),(0,r.jsx)(x,{isLoading:!0},void 0)]}),void 0):(0,r.jsx)("div",w({className:(0,i.A)(g.CommentList,{},[t])},{children:(null==n?void 0:n.length)?n.map((function(e){return(0,r.jsx)(x,{isLoading:o,className:g.comment,comment:e},e.id)})):(0,r.jsx)(s.xv,{text:l("No comments")},void 0)}),void 0)})),k=n(1150),N=n(7168),L=(0,N.hg)("articleDetails/fetchCommentsByArticleId",(function(e,t){return n=void 0,r=void 0,a=function(){var n,r,i,a;return function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}(this,(function(o){switch(o.label){case 0:if(n=t.extra,r=t.rejectWithValue,!e)return[2,r("error")];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,n.api.get("/comments",{params:{articleId:e,_expand:"user"}})];case 2:if(!(i=o.sent()).data)throw new Error;return[2,i.data];case 3:return a=o.sent(),console.log(a),[2,r("Error")];case 4:return[2]}}))},new((i=void 0)||(i=Promise))((function(e,t){function o(e){try{s(a.next(e))}catch(e){t(e)}}function c(e){try{s(a.throw(e))}catch(e){t(e)}}function s(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i((function(e){e(n)}))).then(o,c)}s((a=a.apply(n,r||[])).next())}));var n,r,i,a})),S=(0,N.HF)({selectId:function(e){return e.id}}),C=S.getSelectors((function(e){var t;return(null===(t=e.articleDetailsPage)||void 0===t?void 0:t.comments)||S.getInitialState()})),O=(0,N.oM)({name:"articleDetailsCommentsSlice",initialState:S.getInitialState({isLoading:!1,error:void 0,ids:[],entities:{}}),reducers:{},extraReducers:function(e){e.addCase(L.pending,(function(e,t){e.error=void 0,e.isLoading=!0})).addCase(L.fulfilled,(function(e,t){e.isLoading=!1,S.setAll(e,t.payload)})).addCase(L.rejected,(function(e,t){e.isLoading=!1,e.error=t.payload}))}}).reducer,P=n(6372),A=function(e){var t,n;return null===(n=null===(t=e.articleDetailsPage)||void 0===t?void 0:t.comments)||void 0===n?void 0:n.isLoading},E=n(2276),I=(0,o.lazy)((function(){return e=void 0,t=void 0,i=function(){return function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}(this,(function(e){switch(e.label){case 0:return[4,n.e(102).then(n.bind(n,102))];case 1:return[2,e.sent()]}}))},new((r=void 0)||(r=Promise))((function(n,a){function o(e){try{s(i.next(e))}catch(e){a(e)}}function c(e){try{s(i.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,c)}s((i=i.apply(e,t||[])).next())}));var e,t,r,i})),D=n(7184),z=n(3574),F=(0,N.hg)("articleDetails/addCommentForArticle",(function(e,t){return n=void 0,r=void 0,a=function(){var n,r,i,a,o,c,s;return function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}(this,(function(l){switch(l.label){case 0:if(n=t.extra,r=t.rejectWithValue,i=t.getState,a=t.dispatch,o=(0,z.m5)(i()),c=(0,D.wq)(i()),!o||!e||!c)return[2,r("no data")];l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.api.post("/comments",{articleId:c.id,userId:o.id,text:e})];case 2:if(!(s=l.sent()).data)throw new Error;return a(L(c.id)),[2,s.data];case 3:return l.sent(),[2,r("Error")];case 4:return[2]}}))},new((i=void 0)||(i=Promise))((function(e,t){function o(e){try{s(a.next(e))}catch(e){t(e)}}function c(e){try{s(a.throw(e))}catch(e){t(e)}}function s(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i((function(e){e(n)}))).then(o,c)}s((a=a.apply(n,r||[])).next())}));var n,r,i,a})),H=n(314),T=(0,N.hg)("articleDetailsPage/fetchArticleRecommendations",(function(e,t){return n=void 0,r=void 0,a=function(){var e,n,r,i;return function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}(this,(function(a){switch(a.label){case 0:e=t.extra,n=t.rejectWithValue,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,e.api.get("/articles",{params:{_limit:4}})];case 2:if(!(r=a.sent()).data)throw new Error;return[2,r.data];case 3:return i=a.sent(),console.log(i),[2,n("Error")];case 4:return[2]}}))},new((i=void 0)||(i=Promise))((function(e,t){function o(e){try{s(a.next(e))}catch(e){t(e)}}function c(e){try{s(a.throw(e))}catch(e){t(e)}}function s(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i((function(e){e(n)}))).then(o,c)}s((a=a.apply(n,r||[])).next())}));var n,r,i,a})),R=(0,N.HF)({selectId:function(e){return e.id}}),U=R.getSelectors((function(e){var t;return(null===(t=e.articleDetailsPage)||void 0===t?void 0:t.recommendations)||R.getInitialState()})),W=(0,N.oM)({name:"articleDetaisPageRecommendationsSlice",initialState:R.getInitialState({isLoading:!1,error:void 0,ids:[],entities:{}}),reducers:{},extraReducers:function(e){e.addCase(T.pending,(function(e,t){e.error=void 0,e.isLoading=!0})).addCase(T.fulfilled,(function(e,t){e.isLoading=!1,R.setAll(e,t.payload)})).addCase(T.rejected,(function(e,t){e.isLoading=!1,e.error=t.payload}))}}).reducer,_=(0,n(7779).UY)({recommendations:W,comments:O}),q=n(9161),G=(0,n(573).P1)(c.wq,z.m5,(function(e,t){return!(!e||!t)&&e.user.id===t.id}));var V=function(){return V=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},V.apply(this,arguments)};const B=(0,o.memo)((function(e){var t=e.className,n=(0,a.$)("article-details"),s=n.t,u=(n.i18n,(0,l.s0)()),d=((0,P.v9)(z.m5),(0,P.v9)(c.wq)),f=(0,P.v9)(G),h=(0,o.useCallback)((function(){u(v.h3.articles)}),[u]),p=(0,o.useCallback)((function(){u("".concat(v.h3.articles_details,"/").concat(null==d?void 0:d.id,"/edit"))}),[u,null==d?void 0:d.id]);return(0,r.jsxs)("div",V({className:(0,i.A)("PF3DY",{},[t])},{children:[(0,r.jsx)(q.zx,V({theme:q.bn.OUTLINE,onClick:h},{children:s("Back to list")}),void 0),f&&(0,r.jsx)(q.zx,V({className:"XdnP3",theme:q.bn.OUTLINE,onClick:p},{children:s("Edit")}),void 0)]}),void 0)})),Z="adu8f",$="foyEs";var K=function(){return K=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},K.apply(this,arguments)},M={articleDetailsPage:_},Q=function(e){var t=e.className,n=(0,a.$)("article-details"),u=n.t,d=(n.i18n,(0,l.UO)().id),f=(0,P.I0)(),v=(0,P.v9)(C.selectAll),h=(0,P.v9)(A),p=(0,P.v9)(U.selectAll),m=(0,P.v9)(A),y=(0,o.useCallback)((function(e){f(F(e))}),[f]);return(0,E.Q)((function(){f(L(d)),f(T())})),d?(0,r.jsx)(k.W,K({reducers:M,removeAfterUnmount:!0},{children:(0,r.jsxs)(H.Z,K({className:(0,i.A)(Z,{},[t])},{children:[(0,r.jsx)(B,{},void 0),(0,r.jsx)(c.D0,{id:d},void 0),(0,r.jsx)(s.xv,{size:s.yH.L,className:$,title:u("Recommendations")},void 0),(0,r.jsx)(c.wD,{articles:p,isLoading:m,className:"NwQlS",target:"_blank"},void 0),(0,r.jsx)(s.xv,{size:s.yH.L,className:$,title:u("Comments")},void 0),(0,r.jsx)(I,{onSendComment:y},void 0),(0,r.jsx)(j,{isLoading:h,comments:v},void 0)]}),void 0)}),void 0):(0,r.jsx)(H.Z,K({className:(0,i.A)(Z,{},[t])},{children:u("Article is not found")}),void 0)};const Y=(0,o.memo)(Q)}}]);