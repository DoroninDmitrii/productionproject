"use strict";(self.webpackChunkproductionproject=self.webpackChunkproductionproject||[]).push([[311],{1396:function(e,a,t){t.r(a),t.d(a,{ArticlesPage:function(){return X},default:function(){return K}});var r=t(2327),s=t(9655),c=t(7294),i=t(3007),l=t(1233),n=t(5401),o=t(9970),d=t(8979),g=t(4268),h=t(622),u=t(1283);const v=e=>e.articlePage?.isLoading,p=e=>e.articlePage?.error,m=e=>e.articlePage?.view||h.GA.SMALL,y=e=>e.articlePage?.page||1,w=e=>e.articlePage?.hasMore,f=e=>e.articlePage?._inited,S=e=>e.articlePage?.order??"asc",P=e=>e.articlePage?.sort??h.$B.CREATED,j=e=>e.articlePage?.search??"",x=e=>e.articlePage?.type??h.Iq.ALL,A=(0,g.hg)("articlePage/fetchArticlesList",(async(e,a)=>{const{extra:t,rejectWithValue:r,getState:s}=a,c=s().articlePage?.limit||9,i=P(s()),l=S(s()),n=j(s()),o=y(s()),d=x(s());try{g={sort:i,order:l,search:n,type:d},window.history.pushState(null,"",function(e){const a=new URLSearchParams(window.location.search);return Object.entries(e).forEach((e=>{let[t,r]=e;void 0!==r&&a.set(t,r)})),`?${a.toString()}`}(g));const e=await t.api.get("/articles",{params:{_expand:"user",_limit:c,_page:o,_sort:i,_order:l,q:n,type:d===h.Iq.ALL?void 0:d}});if(!e.data)throw new Error;return e.data}catch(e){return console.log(e),r("Error")}var g})),C=(0,g.HF)({selectId:e=>e.id}),b=C.getSelectors((e=>e.articlePage||C.getInitialState())),L=(0,g.oM)({name:"articlePageSlice",initialState:C.getInitialState({isLoading:!1,error:void 0,ids:[],entities:{},view:h.GA.SMALL,page:1,hasMore:!0,_inited:!1,limit:9,sort:h.$B.CREATED,search:"",order:"asc",type:h.Iq.ALL}),reducers:{setView:(e,a)=>{e.view=a.payload,localStorage.setItem(u.f,a.payload)},setPage:(e,a)=>{e.page=a.payload},setOrder:(e,a)=>{e.order=a.payload},setSort:(e,a)=>{e.sort=a.payload},setType:(e,a)=>{e.type=a.payload},setSearch:(e,a)=>{e.search=a.payload},initState:e=>{const a=localStorage.getItem(u.f);e.view=a,e.limit=a===h.GA.BIG?4:9,e._inited=!0}},extraReducers:e=>{e.addCase(A.pending,((e,a)=>{e.error=void 0,e.isLoading=!0,a.meta.arg.replace&&C.removeAll(e)})).addCase(A.fulfilled,((e,a)=>{e.isLoading=!1,e.hasMore=a.payload.length>=e.limit,a.meta.arg.replace?C.setAll(e,a.payload):C.addMany(e,a.payload)})).addCase(A.rejected,((e,a)=>{e.isLoading=!1,e.error=a.payload}))}}),{reducer:N,actions:k}=L,O=(0,g.hg)("articlePage/fetchNextArticlesPage",(async(e,a)=>{const{getState:t,dispatch:r}=a,s=w(t()),c=y(t()),i=v(t());s&&!i&&(r(k.setPage(c+1)),r(A({})))})),E=(0,g.hg)("articlePage/initArticlesPage",(async(e,a)=>{const{getState:t,dispatch:r}=a;if(!f(t())){const a=e.get("order"),t=e.get("sort"),s=e.get("search"),c=e.get("type");a&&r(k.setOrder(a)),t&&r(k.setSort(t)),s&&r(k.setSearch(s)),c&&r(k.setType(c)),r(k.initState()),r(A({}))}}));var I,M=t(9319);function T(){return T=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},T.apply(this,arguments)}var V;function Z(){return Z=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Z.apply(this,arguments)}var G=t(5255),R=t(3895),$={notSelected:"daqv5"},_=t(5893);const q=[{view:h.GA.SMALL,icon:e=>c.createElement("svg",Z({width:24,height:24,xmlns:"http://www.w3.org/2000/svg",role:"img"},e),V||(V=c.createElement("path",{d:"M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2Zm7 9v5h5v-5h-5Zm-7 0v5h5v-5H6Zm7-7v5h5V6h-5ZM6 6v5h5V6H6Z"})))},{view:h.GA.BIG,icon:e=>c.createElement("svg",T({width:24,height:24,xmlns:"http://www.w3.org/2000/svg",role:"img"},e),I||(I=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.75 18a.75.75 0 0 1 .75-.75h15a.75.75 0 1 1 0 1.5h-15a.75.75 0 0 1-.75-.75Zm0-6a.75.75 0 0 1 .75-.75h15a.75.75 0 1 1 0 1.5h-15a.75.75 0 0 1-.75-.75Zm0-6a.75.75 0 0 1 .75-.75h15a.75.75 0 1 1 0 1.5h-15A.75.75 0 0 1 3.75 6Z"})))}],B=(0,c.memo)((e=>{const{className:a,view:t,onViewClick:s}=e,{t:c,i18n:l}=(0,r.$)();return(0,_.jsx)("div",{className:(0,i.A)($.ArticleViewSelector,{},[a]),children:q.map((e=>{return(0,_.jsx)(G.zx,{theme:G.bn.CLEAR,onClick:(a=e.view,()=>{s?.(a)}),children:(0,_.jsx)(R.J,{Svg:e.icon,className:(0,i.A)("",{[$.notSelected]:e.view!==t})})},e.view);var a}))})}));var F=t(6425),H=t(8312),Q={sortWrapper:"pyOjo",search:"QkNSe",tabs:"JHbc4"};const W=(0,c.memo)((e=>{const{className:a}=e,{t:t,i18n:s}=(0,r.$)("article"),l=(0,n.T)(),o=(0,M.v9)(m),d=(0,M.v9)(P),g=(0,M.v9)(S),u=(0,M.v9)(j),v=(0,M.v9)(x),p=(0,c.useCallback)((()=>{l(A({replace:!0}))}),[l]),y=function(e,a){const t=(0,c.useRef)();return(0,c.useCallback)((function(){for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];t.current&&clearTimeout(t.current),t.current=setTimeout((()=>{e(...r)}),500)}),[e,500])}(p),w=(0,c.useCallback)((e=>{l(k.setView(e)),l(k.setPage(1))}),[l]),f=(0,c.useCallback)((e=>{l(k.setSort(e)),l(k.setPage(1)),p()}),[l,p]),C=(0,c.useCallback)((e=>{l(k.setOrder(e)),l(k.setPage(1)),p()}),[l,p]),b=(0,c.useCallback)((e=>{l(k.setSearch(e)),l(k.setPage(1)),y()}),[l,y]),L=(0,c.useCallback)((e=>{l(k.setType(e)),l(k.setPage(1)),p()}),[l,p]);return(0,_.jsxs)("div",{className:(0,i.A)(Q.ArticlesPageFilters,{},[a]),children:[(0,_.jsxs)("div",{className:Q.sortWrapper,children:[(0,_.jsx)(h.xT,{order:g,sort:d,onChangeOrder:C,onChangeSort:f}),(0,_.jsx)(B,{view:o,onViewClick:w})]}),(0,_.jsx)(F.ZP,{className:Q.search,children:(0,_.jsx)(H.I,{value:u,onChange:b,placeholder:t("Search")})}),(0,_.jsx)(h.XL,{className:Q.tabs,value:v,onChangeType:L})]})}));var D=W,J=t(1715),U=(0,c.memo)((e=>{const{className:a}=e,{t:t,i18n:s}=(0,r.$)("article"),c=((0,n.T)(),(0,M.v9)(b.selectAll)),i=(0,M.v9)(v),l=(0,M.v9)(m),o=(0,M.v9)(p);return(0,M.v9)(y),(0,M.v9)(w),(0,M.v9)(f),o?(0,_.jsx)(J.xv,{text:t("Mistake is happened")}):(0,_.jsx)(h.wD,{isLoading:i,view:l,articles:c,className:a})}));const z={articlePage:N},X=e=>{let{className:a}=e;const{t:t,i18n:g}=(0,r.$)("article"),h=(0,n.T)(),[u]=(0,s.lr)(),v=(0,c.useCallback)((()=>{h(O())}),[h]);return(0,o.Q)((()=>{h(E(u))})),(0,_.jsx)(l.W,{reducers:z,removeAfterUnmount:!1,children:(0,_.jsxs)(d.Z,{onScrollEnd:v,className:(0,i.A)("",{},[a]),children:[(0,_.jsx)(D,{}),(0,_.jsx)(U,{className:"Qvnph"})]})})};var K=(0,c.memo)(X)},8312:function(e,a,t){t.d(a,{I:function(){return i}});var r=t(3007),s=t(7294),c=t(5893);const i=(0,s.memo)((e=>{const{className:a,value:t,onChange:i,type:l="text",placeholder:n,autofocus:o,readonly:d,...g}=e,[h,u]=(0,s.useState)(!1),[v,p]=(0,s.useState)(0),m=(0,s.useRef)(null),y=h&&!d;return(0,s.useEffect)((()=>{o&&(u(!0),m.current?.focus())}),[o]),(0,c.jsxs)("div",{className:(0,r.A)("yiPAS",{},[a]),children:[n&&(0,c.jsx)("div",{className:"emAQQ",children:`${n}>`}),(0,c.jsxs)("div",{className:"y1GiF",children:[(0,c.jsx)("input",{ref:m,type:l,value:t,onChange:e=>{i?.(e.target.value),p(e.target.value.length)},className:"LVdIP",onFocus:()=>{u(!0)},onBlur:()=>{u(!1)},onSelect:e=>{p(e?.target?.selectionStart||0)},readOnly:d,...g}),y&&(0,c.jsx)("span",{className:"lqMFG",style:{left:9*v+"px"}})]})]})}))}}]);