"use strict";(self.webpackChunkproductionproject=self.webpackChunkproductionproject||[]).push([[613],{5613:(d,e,t)=>{t.r(e),t.d(e,{ArticleDetailsPage:()=>Y,default:()=>J});var n=t(5893),r=t(4611),i=t(2327),a=t(7294),o=t(5132),c=t(4809),s=t(9250),l=t(71),u=t(1138),f=t(3048),h=t(8056),v=t(1905);const p={CommentCard:"xIHBy",header:"dsH_3",username:"dw82W",loading:"V0iZ1"};var m=function(){return m=Object.assign||function(d){for(var e,t=1,n=arguments.length;t<n;t++)for(var r in e=arguments[t])Object.prototype.hasOwnProperty.call(e,r)&&(d[r]=e[r]);return d},m.apply(this,arguments)};const y=(0,a.memo)((function(d){var e=d.className,t=d.comment;return d.isLoading?(0,n.jsxs)("div",m({className:(0,r.A)(p.CommentCard,{},[e,p.loading])},{children:[(0,n.jsxs)("div",m({className:p.header},{children:[(0,n.jsx)(u.O,{width:30,height:30,border:"50%"},void 0),(0,n.jsx)(u.O,{height:16,width:100,className:p.username},void 0)]}),void 0),(0,n.jsx)(u.O,{className:p.text,width:"100%",height:50},void 0)]}),void 0):t?(0,n.jsxs)(v.g,m({gap:"8",max:!0,className:(0,r.A)(p.CommentCard,{},[e])},{children:[(0,n.jsxs)(f.F,m({to:"".concat(h.h3.profile,"/").concat(t.user.id),className:p.header},{children:[t.user.avatar?(0,n.jsx)(l.q,{size:30,src:t.user.avatar},void 0):null,(0,n.jsx)(c.xv,{className:p.username,title:t.user.username},void 0)]}),void 0),(0,n.jsx)(c.xv,{className:p.text,text:t.text},void 0)]}),void 0):null}));var b=function(){return b=Object.assign||function(d){for(var e,t=1,n=arguments.length;t<n;t++)for(var r in e=arguments[t])Object.prototype.hasOwnProperty.call(e,r)&&(d[r]=e[r]);return d},b.apply(this,arguments)},g=(0,a.memo)((function(d){var e=d.className,t=d.comments,a=d.isLoading,o=(0,i.$)(),s=o.t;return o.i18n,a?(0,n.jsxs)(v.g,b({gap:"16",max:!0,className:(0,r.A)("",{},[e])},{children:[(0,n.jsx)(y,{isLoading:!0},void 0),(0,n.jsx)(y,{isLoading:!0},void 0),(0,n.jsx)(y,{isLoading:!0},void 0)]}),void 0):(0,n.jsx)(v.g,b({gap:"16",max:!0,className:(0,r.A)("",{},[e])},{children:(null==t?void 0:t.length)?t.map((function(d){return(0,n.jsx)(y,{isLoading:a,comment:d},d.id)})):(0,n.jsx)(c.xv,{text:s("No comments")},void 0)}),void 0)})),x=t(1150),w=t(4268),j=(0,w.hg)("articleDetails/fetchCommentsByArticleId",(function(d,e){return t=void 0,n=void 0,i=function(){var t,n,r,i;return function(d,e){var t,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;a;)try{if(t=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(d,a)}catch(d){i=[6,d],n=0}finally{t=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}}(this,(function(a){switch(a.label){case 0:if(t=e.extra,n=e.rejectWithValue,!d)return[2,n("error")];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,t.api.get("/comments",{params:{articleId:d,_expand:"user"}})];case 2:if(!(r=a.sent()).data)throw new Error;return[2,r.data];case 3:return i=a.sent(),console.log(i),[2,n("Error")];case 4:return[2]}}))},new((r=void 0)||(r=Promise))((function(d,e){function a(d){try{c(i.next(d))}catch(d){e(d)}}function o(d){try{c(i.throw(d))}catch(d){e(d)}}function c(e){var t;e.done?d(e.value):(t=e.value,t instanceof r?t:new r((function(d){d(t)}))).then(a,o)}c((i=i.apply(t,n||[])).next())}));var t,n,r,i})),k=(0,w.HF)({selectId:function(d){return d.id}}),C=k.getSelectors((function(d){var e;return(null===(e=d.articleDetailsPage)||void 0===e?void 0:e.comments)||k.getInitialState()})),L=(0,w.oM)({name:"articleDetailsCommentsSlice",initialState:k.getInitialState({isLoading:!1,error:void 0,ids:[],entities:{}}),reducers:{},extraReducers:function(d){d.addCase(j.pending,(function(d,e){d.error=void 0,d.isLoading=!0})).addCase(j.fulfilled,(function(d,e){d.isLoading=!1,k.setAll(d,e.payload)})).addCase(j.rejected,(function(d,e){d.isLoading=!1,d.error=e.payload}))}}).reducer,N=t(9319),O=function(d){var e,t;return null===(t=null===(e=d.articleDetailsPage)||void 0===e?void 0:e.comments)||void 0===t?void 0:t.isLoading},S=t(2276),A=(0,a.lazy)((function(){return d=void 0,e=void 0,r=function(){return function(d,e){var t,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;a;)try{if(t=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(d,a)}catch(d){i=[6,d],n=0}finally{t=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}}(this,(function(d){switch(d.label){case 0:return[4,t.e(102).then(t.bind(t,102))];case 1:return[2,d.sent()]}}))},new((n=void 0)||(n=Promise))((function(t,i){function a(d){try{c(r.next(d))}catch(d){i(d)}}function o(d){try{c(r.throw(d))}catch(d){i(d)}}function c(d){var e;d.done?t(d.value):(e=d.value,e instanceof n?e:new n((function(d){d(e)}))).then(a,o)}c((r=r.apply(d,e||[])).next())}));var d,e,n,r})),P=t(7184),E=t(3574),I=(0,w.hg)("articleDetails/addCommentForArticle",(function(d,e){return t=void 0,n=void 0,i=function(){var t,n,r,i,a,o,c;return function(d,e){var t,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;a;)try{if(t=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(d,a)}catch(d){i=[6,d],n=0}finally{t=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}}(this,(function(s){switch(s.label){case 0:if(t=e.extra,n=e.rejectWithValue,r=e.getState,i=e.dispatch,a=(0,E.m5)(r()),o=(0,P.wq)(r()),!a||!d||!o)return[2,n("no data")];s.label=1;case 1:return s.trys.push([1,3,,4]),[4,t.api.post("/comments",{articleId:o.id,userId:a.id,text:d})];case 2:if(!(c=s.sent()).data)throw new Error;return i(j(o.id)),[2,c.data];case 3:return s.sent(),[2,n("Error")];case 4:return[2]}}))},new((r=void 0)||(r=Promise))((function(d,e){function a(d){try{c(i.next(d))}catch(d){e(d)}}function o(d){try{c(i.throw(d))}catch(d){e(d)}}function c(e){var t;e.done?d(e.value):(t=e.value,t instanceof r?t:new r((function(d){d(t)}))).then(a,o)}c((i=i.apply(t,n||[])).next())}));var t,n,r,i})),D=t(314),R=t(7779),q=(0,w.hg)("articleDetailsPage/fetchArticleRecommendations",(function(d,e){return t=void 0,n=void 0,i=function(){var d,t,n,r;return function(d,e){var t,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;a;)try{if(t=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(d,a)}catch(d){i=[6,d],n=0}finally{t=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}}(this,(function(i){switch(i.label){case 0:d=e.extra,t=e.rejectWithValue,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,d.api.get("/articles",{params:{_limit:4}})];case 2:if(!(n=i.sent()).data)throw new Error;return[2,n.data];case 3:return r=i.sent(),console.log(r),[2,t("Error")];case 4:return[2]}}))},new((r=void 0)||(r=Promise))((function(d,e){function a(d){try{c(i.next(d))}catch(d){e(d)}}function o(d){try{c(i.throw(d))}catch(d){e(d)}}function c(e){var t;e.done?d(e.value):(t=e.value,t instanceof r?t:new r((function(d){d(t)}))).then(a,o)}c((i=i.apply(t,n||[])).next())}));var t,n,r,i})),z=(0,w.HF)({selectId:function(d){return d.id}}),H=(z.getSelectors((function(d){var e;return(null===(e=d.articleDetailsPage)||void 0===e?void 0:e.recommendations)||z.getInitialState()})),(0,w.oM)({name:"articleDetaisPageRecommendationsSlice",initialState:z.getInitialState({isLoading:!1,error:void 0,ids:[],entities:{}}),reducers:{},extraReducers:function(d){d.addCase(q.pending,(function(d,e){d.error=void 0,d.isLoading=!0})).addCase(q.fulfilled,(function(d,e){d.isLoading=!1,z.setAll(d,e.payload)})).addCase(q.rejected,(function(d,e){d.isLoading=!1,d.error=e.payload}))}}).reducer),T=(0,R.UY)({recommendations:H,comments:L}),U=t(9161),_=(0,t(2222).P1)(o.wq,E.m5,(function(d,e){return!(!d||!e)&&d.user.id===e.id})),G=function(){return G=Object.assign||function(d){for(var e,t=1,n=arguments.length;t<n;t++)for(var r in e=arguments[t])Object.prototype.hasOwnProperty.call(e,r)&&(d[r]=e[r]);return d},G.apply(this,arguments)};const W=(0,a.memo)((function(d){var e=d.className,t=(0,i.$)("article-details"),c=t.t,l=(t.i18n,(0,s.s0)()),u=((0,N.v9)(E.m5),(0,N.v9)(o.wq)),f=(0,N.v9)(_),p=(0,a.useCallback)((function(){l(h.h3.articles)}),[l]),m=(0,a.useCallback)((function(){l("".concat(h.h3.articles_details,"/").concat(null==u?void 0:u.id,"/edit"))}),[l,null==u?void 0:u.id]);return(0,n.jsxs)(v.U,G({max:!0,justify:"between",className:(0,r.A)("",{},[e])},{children:[(0,n.jsx)(U.zx,G({theme:U.bn.OUTLINE,onClick:p},{children:c("Back to list")}),void 0),f&&(0,n.jsx)(U.zx,G({theme:U.bn.OUTLINE,onClick:m},{children:c("Edit")}),void 0)]}),void 0)}));var F=t(1269),V=function(){return V=Object.assign||function(d){for(var e,t=1,n=arguments.length;t<n;t++)for(var r in e=arguments[t])Object.prototype.hasOwnProperty.call(e,r)&&(d[r]=e[r]);return d},V.apply(this,arguments)},$=F.p.injectEndpoints({endpoints:function(d){return{getArticleRecommendationsList:d.query({query:function(){return{url:"/articles",params:{_limit:3,hey:"dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd",hey1:"dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd",hey2:"dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd",hey3:"dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd",hey4:"dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd"}}}})}}}).useGetArticleRecommendationsListQuery,B=(0,a.memo)((function(d){var e=d.className,t=(0,i.$)(),a=t.t,s=(t.i18n,$(3)),l=s.isLoading,u=s.data,f=s.error;return l||f?null:(0,n.jsxs)(v.g,V({gap:"8",className:(0,r.A)("",{},[e])},{children:[(0,n.jsx)(c.xv,{size:c.yH.L,title:a("Recommendations")},void 0),(0,n.jsx)(o.wD,{articles:u,target:"_blank"},void 0)]}),void 0)}));const Z="adu8f";var M=function(){return M=Object.assign||function(d){for(var e,t=1,n=arguments.length;t<n;t++)for(var r in e=arguments[t])Object.prototype.hasOwnProperty.call(e,r)&&(d[r]=e[r]);return d},M.apply(this,arguments)},Q={articleDetailsPage:T},Y=function(d){var e=d.className,t=(0,i.$)("article-details"),l=t.t,u=(t.i18n,(0,s.UO)().id),f=(0,N.I0)(),h=(0,N.v9)(C.selectAll),p=(0,N.v9)(O),m=(0,a.useCallback)((function(d){f(I(d))}),[f]);return(0,S.Q)((function(){f(j(u))})),u?(0,n.jsx)(x.W,M({reducers:Q,removeAfterUnmount:!0},{children:(0,n.jsx)(D.Z,M({className:(0,r.A)(Z,{},[e])},{children:(0,n.jsxs)(v.g,M({gap:"16",max:!0},{children:[(0,n.jsx)(W,{},void 0),(0,n.jsx)(o.D0,{id:u},void 0),(0,n.jsx)(B,{},void 0),(0,n.jsx)(c.xv,{size:c.yH.L,className:"foyEs",title:l("Comments")},void 0),(0,n.jsx)(A,{onSendComment:m},void 0),(0,n.jsx)(g,{isLoading:p,comments:h},void 0)]}),void 0)}),void 0)}),void 0):(0,n.jsx)(D.Z,M({className:(0,r.A)(Z,{},[e])},{children:l("Article is not found")}),void 0)};const J=(0,a.memo)(Y)}}]);