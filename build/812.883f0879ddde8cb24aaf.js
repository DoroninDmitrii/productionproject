"use strict";(self.webpackChunkproductionproject=self.webpackChunkproductionproject||[]).push([[812],{8812:function(e,a,r){r.r(a),r.d(a,{default:function(){return b}});var s=r(7294),t=r(9319),n=r(5401),o=r(3007),c=r(5255),l=r(8312),u=r(2327),d=r(4268),i=r(3381),m=r(1283);const g=(0,d.hg)("users/loginByUsername",(async(e,a)=>{let{password:r,username:s}=e;const{extra:t,dispatch:n,rejectWithValue:o}=a;try{const e=await t.api.post("/login",{username:s,password:r});if(!e.data)throw new Error;return localStorage.setItem(m.z,JSON.stringify(e.data)),n(i.ul.setAuthData(e.data)),e.data}catch(e){return console.log(e),o("Error")}})),p=(0,d.oM)({name:"login",initialState:{isLoading:!1,username:"",password:""},reducers:{setUsername:(e,a)=>{e.username=a.payload},setPassword:(e,a)=>{e.password=a.payload}},extraReducers:e=>{e.addCase(g.pending,((e,a)=>{e.error=void 0,e.isLoading=!0})).addCase(g.fulfilled,((e,a)=>{e.isLoading=!1})).addCase(g.rejected,((e,a)=>{e.isLoading=!1,e.error=a.payload}))}}),{actions:f}=p,{reducer:h}=p;var v=r(1715);const x=e=>e?.loginForm?.username||"",j=e=>e?.loginForm?.password||"",y=e=>e?.loginForm?.isLoading||!1,w=e=>e?.loginForm?.error;var N=r(1233),C="PQPa1",S=r(5893);const E={loginForm:h};var b=(0,s.memo)((e=>{let{className:a,onSuccess:r}=e;const{t:d}=(0,u.$)(),i=(0,n.T)(),m=(0,t.v9)(x),p=(0,t.v9)(j),h=(0,t.v9)(y),b=(0,t.v9)(w),k=(0,s.useCallback)((e=>{i(f.setUsername(e))}),[i]),F=(0,s.useCallback)((e=>{i(f.setPassword(e))}),[i]),I=(0,s.useCallback)((async()=>{"fulfilled"===(await i(g({password:p,username:m}))).meta.requestStatus&&r()}),[r,i,p,m]);return(0,S.jsx)(N.W,{removeAfterUnmount:!0,reducers:E,children:(0,S.jsxs)("div",{className:(0,o.A)("xYNEf",{},[a]),children:[(0,S.jsx)(v.xv,{title:d("Authentication form")}),b&&(0,S.jsx)(v.xv,{text:d("Your login or password is not correct"),theme:v.lg.ERROR}),(0,S.jsx)(l.I,{autofocus:!0,placeholder:d("Username"),type:"text",className:C,onChange:k,value:m}),(0,S.jsx)(l.I,{placeholder:d("Password"),type:"text",className:C,onChange:F,value:p}),(0,S.jsx)(c.zx,{theme:c.bn.OUTLINE,className:"Ok_5a",onClick:I,disabled:h,children:d("Log in")})]})})}))},1233:function(e,a,r){r.d(a,{W:function(){return o}});var s=r(7294),t=r(9319),n=r(5893);const o=e=>{const{children:a,reducers:r,removeAfterUnmount:o}=e,c=(0,t.oR)(),l=(0,t.I0)();return(0,s.useEffect)((()=>{const e=c.reducerManager.getMountedReducers();return Object.entries(r).forEach((a=>{let[r,s]=a;e[r]||(c.reducerManager.add(r,s),l({type:`@INIT ${r} reducer`}))})),()=>{o&&Object.entries(r).forEach((e=>{let[a,r]=e;c.reducerManager.remove(a),l({type:`@DESTROY ${a} reducer`})}))}}),[]),(0,n.jsx)(n.Fragment,{children:a})}},8312:function(e,a,r){r.d(a,{I:function(){return o}});var s=r(3007),t=r(7294),n=r(5893);const o=(0,t.memo)((e=>{const{className:a,value:r,onChange:o,type:c="text",placeholder:l,autofocus:u,readonly:d,...i}=e,[m,g]=(0,t.useState)(!1),[p,f]=(0,t.useState)(0),h=(0,t.useRef)(null),v=m&&!d;return(0,t.useEffect)((()=>{u&&(g(!0),h.current?.focus())}),[u]),(0,n.jsxs)("div",{className:(0,s.A)("yiPAS",{},[a]),children:[l&&(0,n.jsx)("div",{className:"emAQQ",children:`${l}>`}),(0,n.jsxs)("div",{className:"y1GiF",children:[(0,n.jsx)("input",{ref:h,type:c,value:r,onChange:e=>{o?.(e.target.value),f(e.target.value.length)},className:"LVdIP",onFocus:()=>{g(!0)},onBlur:()=>{g(!1)},onSelect:e=>{f(e?.target?.selectionStart||0)},readOnly:d,...i}),v&&(0,n.jsx)("span",{className:"lqMFG",style:{left:9*p+"px"}})]})]})}))}}]);