"use strict";(self.webpackChunkproductionproject=self.webpackChunkproductionproject||[]).push([[812],{8812:(e,r,n)=>{n.r(r),n.d(r,{default:()=>E});var t=n(5861),a=n(4687),o=n.n(a),s=n(7294),c=n(9319),u=n(5401),i=n(3007),l=n(5255),d=n(8312),f=n(4478),p=n(4268),v=n(3381),m=n(1283),g=(0,p.hg)("users/loginByUsername",function(){var e=(0,t.Z)(o().mark((function e(r,n){var t,a,s,c,u,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.password,a=r.username,s=n.extra,c=n.dispatch,u=n.rejectWithValue,e.prev=2,e.next=5,s.api.post("/login",{username:a,password:t});case 5:if((i=e.sent).data){e.next=8;break}throw new Error;case 8:return localStorage.setItem(m.z,JSON.stringify(i.data)),c(v.ul.setAuthData(i.data)),e.abrupt("return",i.data);case 13:return e.prev=13,e.t0=e.catch(2),console.log(e.t0),e.abrupt("return",u("Error"));case 17:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(r,n){return e.apply(this,arguments)}}()),h=(0,p.oM)({name:"login",initialState:{isLoading:!1,username:"",password:""},reducers:{setUsername:function(e,r){e.username=r.payload},setPassword:function(e,r){e.password=r.payload}},extraReducers:function(e){e.addCase(g.pending,(function(e,r){e.error=void 0,e.isLoading=!0})).addCase(g.fulfilled,(function(e,r){e.isLoading=!1})).addCase(g.rejected,(function(e,r){e.isLoading=!1,e.error=r.payload}))}}),j=h.actions,y=h.reducer,x=n(1715),b=function(e){var r;return(null==e||null===(r=e.loginForm)||void 0===r?void 0:r.username)||""},O=function(e){var r;return(null==e||null===(r=e.loginForm)||void 0===r?void 0:r.password)||""},w=function(e){var r;return(null==e||null===(r=e.loginForm)||void 0===r?void 0:r.isLoading)||!1},N=function(e){var r;return null==e||null===(r=e.loginForm)||void 0===r?void 0:r.error},P=n(1233);const C="PQPa1";var k=n(5893),S={loginForm:y};const E=(0,s.memo)((function(e){var r=e.className,n=e.onSuccess,a=(0,f.$)().t,p=(0,u.T)(),v=(0,c.v9)(b),m=(0,c.v9)(O),h=(0,c.v9)(w),y=(0,c.v9)(N),E=(0,s.useCallback)((function(e){p(j.setUsername(e))}),[p]),F=(0,s.useCallback)((function(e){p(j.setPassword(e))}),[p]),I=(0,s.useCallback)((0,t.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p(g({password:m,username:v}));case 2:"fulfilled"===e.sent.meta.requestStatus&&n();case 4:case"end":return e.stop()}}),e)}))),[n,p,m,v]);return(0,k.jsx)(P.W,{removeAfterUnmount:!0,reducers:S,children:(0,k.jsxs)("div",{className:(0,i.A)("xYNEf",{},[r]),children:[(0,k.jsx)(x.xv,{title:a("Authentication form")}),y&&(0,k.jsx)(x.xv,{text:a("Your login or password is not correct"),theme:x.lg.ERROR}),(0,k.jsx)(d.I,{autofocus:!0,placeholder:a("Username"),type:"text",className:C,onChange:E,value:v}),(0,k.jsx)(d.I,{placeholder:a("Password"),type:"text",className:C,onChange:F,value:m}),(0,k.jsx)(l.zx,{theme:l.bn.OUTLINE,className:"Ok_5a",onClick:I,disabled:h,children:a("Log in")})]})})}))},1233:(e,r,n)=>{n.d(r,{W:()=>c});var t=n(9439),a=n(7294),o=n(9319),s=n(5893),c=function(e){var r=e.children,n=e.reducers,c=e.removeAfterUnmount,u=(0,o.oR)(),i=(0,o.I0)();return(0,a.useEffect)((function(){var e=u.reducerManager.getMountedReducers();return Object.entries(n).forEach((function(r){var n=(0,t.Z)(r,2),a=n[0],o=n[1];e[a]||(u.reducerManager.add(a,o),i({type:"@INIT ".concat(a," reducer")}))})),function(){c&&Object.entries(n).forEach((function(e){var r=(0,t.Z)(e,2),n=r[0];r[1],u.reducerManager.remove(n),i({type:"@DESTROY ".concat(n," reducer")})}))}}),[]),(0,s.jsx)(s.Fragment,{children:r})}},8312:(e,r,n)=>{n.d(r,{I:()=>f});var t=n(4942),a=n(9439),o=n(4925),s=n(3007),c=n(7294);var u=n(5893),i=["className","value","onChange","type","placeholder","autofocus","readonly"];function l(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function d(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?l(Object(n),!0).forEach((function(r){(0,t.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}var f=(0,c.memo)((function(e){var r=e.className,n=e.value,l=e.onChange,f=e.type,p=void 0===f?"text":f,v=e.placeholder,m=e.autofocus,g=e.readonly,h=(0,o.Z)(e,i),j=(0,c.useState)(!1),y=(0,a.Z)(j,2),x=y[0],b=y[1],O=(0,c.useState)(0),w=(0,a.Z)(O,2),N=w[0],P=w[1],C=(0,c.useRef)(null),k=x&&!g;return(0,c.useEffect)((function(){var e;m&&(b(!0),null===(e=C.current)||void 0===e||e.focus())}),[m]),(0,t.Z)({},"fTN1P",g),(0,u.jsxs)("div",{className:(0,s.A)("yiPAS",{},[r]),children:[v&&(0,u.jsx)("div",{className:"emAQQ",children:"".concat(v,">")}),(0,u.jsxs)("div",{className:"y1GiF",children:[(0,u.jsx)("input",d({ref:C,type:p,value:n,onChange:function(e){null==l||l(e.target.value),P(e.target.value.length)},className:"LVdIP",onFocus:function(){b(!0)},onBlur:function(){b(!1)},onSelect:function(e){var r;P((null==e||null===(r=e.target)||void 0===r?void 0:r.selectionStart)||0)},readOnly:g},h)),k&&(0,u.jsx)("span",{className:"lqMFG",style:{left:"".concat(9*N,"px")}})]})]})}))}}]);