"use strict";(self.webpackChunkproductionproject=self.webpackChunkproductionproject||[]).push([[250],{1396:(e,t,r)=>{r.r(t),r.d(t,{ArticlesPage:()=>te,default:()=>re});var a=r(9439),n=r(4478),i=r(9655),o=r(7294),c=r(3007),l=r(1233),s=r(5401),u=r(9970),v=r(8979),d=r(4268),p=r(622),f=r(1283),g=r(5861),h=r(4687),m=r.n(h);var y,w=function(e){var t;return null===(t=e.articlePage)||void 0===t?void 0:t.isLoading},j=function(e){var t;return null===(t=e.articlePage)||void 0===t?void 0:t.error},P=function(e){var t;return(null===(t=e.articlePage)||void 0===t?void 0:t.view)||p.GA.SMALL},b=function(e){var t;return(null===(t=e.articlePage)||void 0===t?void 0:t.page)||1},S=function(e){var t;return null===(t=e.articlePage)||void 0===t?void 0:t.hasMore},x=function(e){var t;return null===(t=e.articlePage)||void 0===t?void 0:t._inited},A=function(e){var t,r;return null!==(t=null===(r=e.articlePage)||void 0===r?void 0:r.order)&&void 0!==t?t:"asc"},O=function(e){var t,r;return null!==(t=null===(r=e.articlePage)||void 0===r?void 0:r.sort)&&void 0!==t?t:p.$B.CREATED},C=function(e){var t,r;return null!==(t=null===(r=e.articlePage)||void 0===r?void 0:r.search)&&void 0!==t?t:""},L=function(e){var t,r;return null!==(t=null===(r=e.articlePage)||void 0===r?void 0:r.type)&&void 0!==t?t:p.Iq.ALL},N=(0,d.hg)("articlePage/fetchArticlesList",function(){var e=(0,g.Z)(m().mark((function e(t,r){var n,i,o,c,l,s,u,v,d,f;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.extra,i=r.rejectWithValue,g=(o=r.getState)(),void 0,c=(null===(h=g.articlePage)||void 0===h?void 0:h.limit)||9,l=O(o()),s=A(o()),u=C(o()),v=b(o()),d=L(o()),e.prev=7,t={sort:l,order:s,search:u,type:d},window.history.pushState(null,"",function(e){var t=new URLSearchParams(window.location.search);return Object.entries(e).forEach((function(e){var r=(0,a.Z)(e,2),n=r[0],i=r[1];void 0!==i&&t.set(n,i)})),"?".concat(t.toString())}(t)),e.next=11,n.api.get("/articles",{params:{_expand:"user",_limit:c,_page:v,_sort:l,_order:s,q:u,type:d===p.Iq.ALL?void 0:d}});case 11:if((f=e.sent).data){e.next=14;break}throw new Error;case 14:return e.abrupt("return",f.data);case 17:return e.prev=17,e.t0=e.catch(7),console.log(e.t0),e.abrupt("return",i("Error"));case 21:case"end":return e.stop()}var t,g,h}),e,null,[[7,17]])})));return function(t,r){return e.apply(this,arguments)}}()),k=(0,d.HF)({selectId:function(e){return e.id}}),Z=k.getSelectors((function(e){return e.articlePage||k.getInitialState()})),E=(0,d.oM)({name:"articlePageSlice",initialState:k.getInitialState({isLoading:!1,error:void 0,ids:[],entities:{},view:p.GA.SMALL,page:1,hasMore:!0,_inited:!1,limit:9,sort:p.$B.CREATED,search:"",order:"asc",type:p.Iq.ALL}),reducers:{setView:function(e,t){e.view=t.payload,localStorage.setItem(f.f,t.payload)},setPage:function(e,t){e.page=t.payload},setOrder:function(e,t){e.order=t.payload},setSort:function(e,t){e.sort=t.payload},setType:function(e,t){e.type=t.payload},setSearch:function(e,t){e.search=t.payload},initState:function(e){var t=localStorage.getItem(f.f);e.view=t,e.limit=t===p.GA.BIG?4:9,e._inited=!0}},extraReducers:function(e){e.addCase(N.pending,(function(e,t){e.error=void 0,e.isLoading=!0,t.meta.arg.replace&&k.removeAll(e)})).addCase(N.fulfilled,(function(e,t){e.isLoading=!1,e.hasMore=t.payload.length>=e.limit,t.meta.arg.replace?k.setAll(e,t.payload):k.addMany(e,t.payload)})).addCase(N.rejected,(function(e,t){e.isLoading=!1,e.error=t.payload}))}}),I=E.reducer,M=E.actions,T=(0,d.hg)("articlePage/fetchNextArticlesPage",function(){var e=(0,g.Z)(m().mark((function e(t,r){var a,n,i,o,c;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=r.getState,n=r.dispatch,i=S(a()),o=b(a()),c=w(a()),i&&!c&&(n(M.setPage(o+1)),n(N({})));case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),V=(0,d.hg)("articlePage/initArticlesPage",function(){var e=(0,g.Z)(m().mark((function e(t,r){var a,n,i,o,c,l;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=r.getState,n=r.dispatch,x(a())||(i=t.get("order"),o=t.get("sort"),c=t.get("search"),l=t.get("type"),i&&n(M.setOrder(i)),o&&n(M.setSort(o)),c&&n(M.setSearch(c)),l&&n(M.setType(l)),n(M.initState()),n(N({})));case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),G=r(9319),R=r(4942);function _(){return _=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},_.apply(this,arguments)}var D;function q(){return q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},q.apply(this,arguments)}var $=r(5255),B=r(3895);const F={notSelected:"daqv5"};var H=r(5893),Q=[{view:p.GA.SMALL,icon:function(e){return o.createElement("svg",q({width:24,height:24,xmlns:"http://www.w3.org/2000/svg",role:"img"},e),D||(D=o.createElement("path",{d:"M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2Zm7 9v5h5v-5h-5Zm-7 0v5h5v-5H6Zm7-7v5h5V6h-5ZM6 6v5h5V6H6Z"})))}},{view:p.GA.BIG,icon:function(e){return o.createElement("svg",_({width:24,height:24,xmlns:"http://www.w3.org/2000/svg",role:"img"},e),y||(y=o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.75 18a.75.75 0 0 1 .75-.75h15a.75.75 0 1 1 0 1.5h-15a.75.75 0 0 1-.75-.75Zm0-6a.75.75 0 0 1 .75-.75h15a.75.75 0 1 1 0 1.5h-15a.75.75 0 0 1-.75-.75Zm0-6a.75.75 0 0 1 .75-.75h15a.75.75 0 1 1 0 1.5h-15A.75.75 0 0 1 3.75 6Z"})))}}],W=(0,o.memo)((function(e){var t=e.className,r=e.view,a=e.onViewClick,i=(0,n.$)();return i.t,i.i18n,(0,H.jsx)("div",{className:(0,c.A)(F.ArticleViewSelector,{},[t]),children:Q.map((function(e){return(0,H.jsx)($.zx,{theme:$.bn.CLEAR,onClick:(t=e.view,function(){null==a||a(t)}),children:(0,H.jsx)(B.J,{Svg:e.icon,className:(0,c.A)("",(0,R.Z)({},F.notSelected,e.view!==r))})},e.view);var t}))})})),J=r(6425),U=r(8312);const z={sortWrapper:"pyOjo",search:"QkNSe",tabs:"JHbc4"},X=(0,o.memo)((function(e){var t,r,a=e.className,i=(0,n.$)("article"),l=i.t,u=(i.i18n,(0,s.T)()),v=(0,G.v9)(P),d=(0,G.v9)(O),f=(0,G.v9)(A),g=(0,G.v9)(C),h=(0,G.v9)(L),m=(0,o.useCallback)((function(){u(N({replace:!0}))}),[u]),y=(t=m,500,r=(0,o.useRef)(),(0,o.useCallback)((function(){for(var e=arguments.length,a=new Array(e),n=0;n<e;n++)a[n]=arguments[n];r.current&&clearTimeout(r.current),r.current=setTimeout((function(){t.apply(void 0,a)}),500)}),[t,500])),w=(0,o.useCallback)((function(e){u(M.setView(e)),u(M.setPage(1))}),[u]),j=(0,o.useCallback)((function(e){u(M.setSort(e)),u(M.setPage(1)),m()}),[u,m]),b=(0,o.useCallback)((function(e){u(M.setOrder(e)),u(M.setPage(1)),m()}),[u,m]),S=(0,o.useCallback)((function(e){u(M.setSearch(e)),u(M.setPage(1)),y()}),[u,y]),x=(0,o.useCallback)((function(e){u(M.setType(e)),u(M.setPage(1)),m()}),[u,m]);return(0,H.jsxs)("div",{className:(0,c.A)(z.ArticlesPageFilters,{},[a]),children:[(0,H.jsxs)("div",{className:z.sortWrapper,children:[(0,H.jsx)(p.xT,{order:f,sort:d,onChangeOrder:b,onChangeSort:j}),(0,H.jsx)(W,{view:v,onViewClick:w})]}),(0,H.jsx)(J.ZP,{className:z.search,children:(0,H.jsx)(U.I,{value:g,onChange:S,placeholder:l("Search")})}),(0,H.jsx)(p.XL,{className:z.tabs,value:h,onChangeType:x})]})}));var K=r(1715);const Y=(0,o.memo)((function(e){var t=e.className,r=(0,n.$)("article"),a=r.t,i=(r.i18n,(0,s.T)(),(0,G.v9)(Z.selectAll)),o=(0,G.v9)(w),c=(0,G.v9)(P),l=(0,G.v9)(j);return(0,G.v9)(b),(0,G.v9)(S),(0,G.v9)(x),l?(0,H.jsx)(K.xv,{text:a("Mistake is happened")}):(0,H.jsx)(p.wD,{isLoading:o,view:c,articles:i,className:t})}));var ee={articlePage:I},te=function(e){var t=e.className,r=(0,n.$)("article"),d=(r.t,r.i18n,(0,s.T)()),p=(0,i.lr)(),f=(0,a.Z)(p,1)[0],g=(0,o.useCallback)((function(){d(T())}),[d]);return(0,u.Q)((function(){d(V(f))})),(0,H.jsx)(l.W,{reducers:ee,removeAfterUnmount:!1,children:(0,H.jsxs)(v.Z,{onScrollEnd:g,className:(0,c.A)("",{},[t]),children:[(0,H.jsx)(X,{}),(0,H.jsx)(Y,{className:"Qvnph"})]})})};const re=(0,o.memo)(te)},8312:(e,t,r)=>{r.d(t,{I:()=>d});var a=r(4942),n=r(9439),i=r(4925),o=r(3007),c=r(7294);var l=r(5893),s=["className","value","onChange","type","placeholder","autofocus","readonly"];function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){(0,a.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var d=(0,c.memo)((function(e){var t=e.className,r=e.value,u=e.onChange,d=e.type,p=void 0===d?"text":d,f=e.placeholder,g=e.autofocus,h=e.readonly,m=(0,i.Z)(e,s),y=(0,c.useState)(!1),w=(0,n.Z)(y,2),j=w[0],P=w[1],b=(0,c.useState)(0),S=(0,n.Z)(b,2),x=S[0],A=S[1],O=(0,c.useRef)(null),C=j&&!h;return(0,c.useEffect)((function(){var e;g&&(P(!0),null===(e=O.current)||void 0===e||e.focus())}),[g]),(0,a.Z)({},"fTN1P",h),(0,l.jsxs)("div",{className:(0,o.A)("yiPAS",{},[t]),children:[f&&(0,l.jsx)("div",{className:"emAQQ",children:"".concat(f,">")}),(0,l.jsxs)("div",{className:"y1GiF",children:[(0,l.jsx)("input",v({ref:O,type:p,value:r,onChange:function(e){null==u||u(e.target.value),A(e.target.value.length)},className:"LVdIP",onFocus:function(){P(!0)},onBlur:function(){P(!1)},onSelect:function(e){var t;A((null==e||null===(t=e.target)||void 0===t?void 0:t.selectionStart)||0)},readOnly:h},m)),C&&(0,l.jsx)("span",{className:"lqMFG",style:{left:"".concat(9*x,"px")}})]})]})}))}}]);