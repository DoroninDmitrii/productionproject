"use strict";(self.webpackChunkproductionproject=self.webpackChunkproductionproject||[]).push([[347],{1347:(e,n,t)=>{t.r(n),t.d(n,{default:()=>P});var r=t(5893),o=t(7294),a=t(9319),i=t(5461),u=t(4611),l=t(9161),s=t(6925),c=t(2327),d=t(4268),f=t(3574),p=t(7665),v=(0,d.hg)("users/loginByUsername",(function(e,n){var t,r,o,a,i=e.password,u=e.username;return t=void 0,r=void 0,a=function(){var e,t,r,o,a;return function(e,n){var t,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=n.call(e,i)}catch(e){a=[6,e],r=0}finally{t=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}}(this,(function(l){switch(l.label){case 0:e=n.extra,t=n.dispatch,r=n.rejectWithValue,l.label=1;case 1:return l.trys.push([1,3,,4]),[4,e.api.post("/login",{username:u,password:i})];case 2:if(!(o=l.sent()).data)throw new Error;return localStorage.setItem(p.z,JSON.stringify(o.data)),t(f.ul.setAuthData(o.data)),[2,o.data];case 3:return a=l.sent(),console.log(a),[2,r("Error")];case 4:return[2]}}))},new((o=void 0)||(o=Promise))((function(e,n){function i(e){try{l(a.next(e))}catch(e){n(e)}}function u(e){try{l(a.throw(e))}catch(e){n(e)}}function l(n){var t;n.done?e(n.value):(t=n.value,t instanceof o?t:new o((function(e){e(t)}))).then(i,u)}l((a=a.apply(t,r||[])).next())}))})),h=(0,d.oM)({name:"login",initialState:{isLoading:!1,username:"",password:""},reducers:{setUsername:function(e,n){e.username=n.payload},setPassword:function(e,n){e.password=n.payload}},extraReducers:function(e){e.addCase(v.pending,(function(e,n){e.error=void 0,e.isLoading=!0})).addCase(v.fulfilled,(function(e,n){e.isLoading=!1})).addCase(v.rejected,(function(e,n){e.isLoading=!1,e.error=n.payload}))}}),b=h.actions,y=h.reducer;const w="PQPa1";var m=t(4809),g=function(e){var n;return(null===(n=null==e?void 0:e.loginForm)||void 0===n?void 0:n.username)||""},x=function(e){var n;return(null===(n=null==e?void 0:e.loginForm)||void 0===n?void 0:n.password)||""},k=function(e){var n;return(null===(n=null==e?void 0:e.loginForm)||void 0===n?void 0:n.isLoading)||!1},j=function(e){var n;return null===(n=null==e?void 0:e.loginForm)||void 0===n?void 0:n.error},C=t(1150),S=function(){return S=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},S.apply(this,arguments)},N={loginForm:y};const P=(0,o.memo)((function(e){var n=e.className,t=e.onSuccess,d=(0,c.$)().t,f=(0,i.T)(),p=(0,a.v9)(g),h=(0,a.v9)(x),y=(0,a.v9)(k),P=(0,a.v9)(j),E=(0,o.useCallback)((function(e){f(b.setUsername(e))}),[f]),L=(0,o.useCallback)((function(e){f(b.setPassword(e))}),[f]),O=(0,o.useCallback)((function(){return e=void 0,n=void 0,o=function(){return function(e,n){var t,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=n.call(e,i)}catch(e){a=[6,e],r=0}finally{t=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}}(this,(function(e){switch(e.label){case 0:return[4,f(v({password:h,username:p}))];case 1:return"fulfilled"===e.sent().meta.requestStatus&&t(),[2]}}))},new((r=void 0)||(r=Promise))((function(t,a){function i(e){try{l(o.next(e))}catch(e){a(e)}}function u(e){try{l(o.throw(e))}catch(e){a(e)}}function l(e){var n;e.done?t(e.value):(n=e.value,n instanceof r?n:new r((function(e){e(n)}))).then(i,u)}l((o=o.apply(e,n||[])).next())}));var e,n,r,o}),[t,f,h,p]);return(0,r.jsx)(C.W,S({removeAfterUnmount:!0,reducers:N},{children:(0,r.jsxs)("div",S({className:(0,u.A)("xYNEf",{},[n])},{children:[(0,r.jsx)(m.xv,{title:d("Authentication form")},void 0),P&&(0,r.jsx)(m.xv,{text:d("Your login or password is not correct"),theme:m.lg.ERROR},void 0),(0,r.jsx)(s.I,{autofocus:!0,placeholder:d("Username"),type:"text",className:w,onChange:E,value:p},void 0),(0,r.jsx)(s.I,{placeholder:d("Password"),type:"text",className:w,onChange:L,value:h},void 0),(0,r.jsx)(l.zx,S({theme:l.bn.OUTLINE,className:"Ok_5a",onClick:O,disabled:y},{children:d("Log in")}),void 0)]}),void 0)}),void 0)}))}}]);